<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>xrDebug 3.0 | Rodolfo Berrios</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/rodber.png">
    <link rel="apple-touch-icon" href="/rodber.png">
    <link rel="alternate" type="application/rss+xml" href="https://rodolfoberrios.com/rss.xml" title="Rodolfo Berrios RSS Feed">
    <link rel="alternate" type="application/atom+xml" href="https://rodolfoberrios.com/feed.atom" title="Rodolfo Berrios Atom Feed">
    <link rel="alternate" type="application/json" href="https://rodolfoberrios.com/feed.json" title="Rodolfo Berrios JSON Feed">
    <meta name="description" content="Go xrDebug!">
    <meta property="article:published_time" content="2024-12-26T18:16:39.000Z">
    <meta property="og:site_name" content="Rodolfo Berrios">
    <meta property="og:title" content="xrDebug 3.0">
    <meta property="og:description" content="Go xrDebug!">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://rodolfoberrios.com/2024/12/26/xrdebug-3-0/">
    <meta property="og:image" content="https://rodolfoberrios.com/photos/2024/xrdebug-3.0.webp">
    <meta name="twitter:title" content="xrDebug 3.0">
    <meta name="twitter:description" content="Go xrDebug!">
    <meta name="twitter:url" content="https://rodolfoberrios.com/2024/12/26/xrdebug-3-0/">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://rodolfoberrios.com/photos/2024/xrdebug-3.0.webp">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="show, dev, golang">
    <meta property="article:tag" content="show">
    <meta name="theme-color" content="#2c3e50">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preload" href="/assets/css/0.styles.cb22d58f.css" as="style"><link rel="preload" href="/assets/js/app.29ff170a.js" as="script"><link rel="preload" href="/assets/js/6.2d350c7c.js" as="script"><link rel="preload" href="/assets/js/3.042bda6b.js" as="script"><link rel="preload" href="/assets/js/66.3c384577.js" as="script"><link rel="prefetch" href="/assets/js/10.3c1b6871.js"><link rel="prefetch" href="/assets/js/11.14cf862f.js"><link rel="prefetch" href="/assets/js/12.427def72.js"><link rel="prefetch" href="/assets/js/13.43903feb.js"><link rel="prefetch" href="/assets/js/14.c5cb96ce.js"><link rel="prefetch" href="/assets/js/15.2dbe8386.js"><link rel="prefetch" href="/assets/js/16.d2eee437.js"><link rel="prefetch" href="/assets/js/17.1131ddde.js"><link rel="prefetch" href="/assets/js/18.1eccb7be.js"><link rel="prefetch" href="/assets/js/19.047a78e5.js"><link rel="prefetch" href="/assets/js/20.b73e29df.js"><link rel="prefetch" href="/assets/js/21.9456f1d3.js"><link rel="prefetch" href="/assets/js/22.8ec087ff.js"><link rel="prefetch" href="/assets/js/23.64d43cae.js"><link rel="prefetch" href="/assets/js/24.f8d305c8.js"><link rel="prefetch" href="/assets/js/25.85d3b050.js"><link rel="prefetch" href="/assets/js/26.ea720f03.js"><link rel="prefetch" href="/assets/js/27.bbcca9e7.js"><link rel="prefetch" href="/assets/js/28.38a6b416.js"><link rel="prefetch" href="/assets/js/29.0df3f5e5.js"><link rel="prefetch" href="/assets/js/30.e33956a1.js"><link rel="prefetch" href="/assets/js/31.64e62c0f.js"><link rel="prefetch" href="/assets/js/32.d7511caa.js"><link rel="prefetch" href="/assets/js/33.b2a33e63.js"><link rel="prefetch" href="/assets/js/34.3afbd281.js"><link rel="prefetch" href="/assets/js/35.e27dc2ac.js"><link rel="prefetch" href="/assets/js/36.f0473d75.js"><link rel="prefetch" href="/assets/js/37.36e0eed7.js"><link rel="prefetch" href="/assets/js/38.a7de7fae.js"><link rel="prefetch" href="/assets/js/39.7f909a9c.js"><link rel="prefetch" href="/assets/js/4.a5a6adf8.js"><link rel="prefetch" href="/assets/js/40.8c9c3358.js"><link rel="prefetch" href="/assets/js/41.35a2fd8e.js"><link rel="prefetch" href="/assets/js/42.9fa8465d.js"><link rel="prefetch" href="/assets/js/43.9d3040ee.js"><link rel="prefetch" href="/assets/js/44.b79380db.js"><link rel="prefetch" href="/assets/js/45.9f615ee6.js"><link rel="prefetch" href="/assets/js/46.7a6bee1e.js"><link rel="prefetch" href="/assets/js/47.d99aa854.js"><link rel="prefetch" href="/assets/js/48.6be8e7fa.js"><link rel="prefetch" href="/assets/js/49.7e9bd27a.js"><link rel="prefetch" href="/assets/js/5.c507ac20.js"><link rel="prefetch" href="/assets/js/50.964aa997.js"><link rel="prefetch" href="/assets/js/51.f98e3edc.js"><link rel="prefetch" href="/assets/js/52.32729a44.js"><link rel="prefetch" href="/assets/js/53.d541b857.js"><link rel="prefetch" href="/assets/js/54.afa806f8.js"><link rel="prefetch" href="/assets/js/55.3b81517a.js"><link rel="prefetch" href="/assets/js/56.72cd0006.js"><link rel="prefetch" href="/assets/js/57.ffc24ebd.js"><link rel="prefetch" href="/assets/js/58.535a1f12.js"><link rel="prefetch" href="/assets/js/59.f2127a35.js"><link rel="prefetch" href="/assets/js/60.c927e111.js"><link rel="prefetch" href="/assets/js/61.9b0e807f.js"><link rel="prefetch" href="/assets/js/62.f70e4840.js"><link rel="prefetch" href="/assets/js/63.f8ce2eef.js"><link rel="prefetch" href="/assets/js/64.e2ce54b4.js"><link rel="prefetch" href="/assets/js/65.c4536268.js"><link rel="prefetch" href="/assets/js/67.458b3a2d.js"><link rel="prefetch" href="/assets/js/68.ebdcf266.js"><link rel="prefetch" href="/assets/js/7.e0e0be5a.js"><link rel="prefetch" href="/assets/js/8.9dfc6da0.js"><link rel="prefetch" href="/assets/js/9.a5a8acdc.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.e12a8b30.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cb22d58f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><nav class="navbar navbar-expand-md navbar-light"><div class="container"><a href="/" class="navbar-brand"><img src="/avatars/rodber.png">
            Rodolfo Berrios
          </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg> <div class="collapse navbar-collapse"><ul class="navbar-nav ml-auto"><li class="nav-item"><a href="/tag/" class="nav-link">Tags</a></li><li class="nav-item"><a href="/about/" class="nav-link">About</a></li> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <a href="/rss.xml" class="feed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></ul></div></div></nav></div></header></section> <div class="container wrapmain"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><div class="row justify-content-center"><div class="col-md-8"><header><span class="text-muted"><div class="post-meta"><!----> <div class="post-meta-date"><time pubdate itemprop="datePublished" datetime="2024-12-26T18:16:39.000Z">
      Thu, Dec 26 2024
    </time></div> <!----></div></span> <h1 itemprop="name headline" class="article-head mt-3">
            xrDebug 3.0
          </h1> <p class="lead">Go xrDebug!</p> <div><span><div class="d-flex align-items-center"><div class="profile-avatar"><!----></div> <!----></div></span><span><div class="d-flex align-items-center"><div class="profile-avatar"><img src="/avatars/rodber.jpeg" alt="rodber" class="avatar-image"></div> <div><span>rodber</span>  
        <a href="https://github.com/rodber" target="_blank" rel="noopener noreferrer" class="external btn btn-sm btn-outline-dark">GitHub</a></div></div></span><span><div class="d-flex align-items-center"><div class="profile-avatar"><!----></div> <!----></div></span><span><div class="d-flex align-items-center"><div class="profile-avatar"><!----></div> <!----></div></span></div></header></div></div> <div class="row justify-content-center text-center mt-4 mb-40"><div class="col-md-9"><img src="/photos/2024/xrdebug-3.0.webp" class="featured-img"></div></div> <div class="row justify-content-center"><div class="col-md-8"><div itemprop="articleBody" class="content__default"><p>For <a href="https://xrdebug.com/" target="_blank" rel="noopener noreferrer">xrDebug<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> V3 I have rebuilt the software from <a href="https://www.php.net" target="_blank" rel="noopener noreferrer">PHP<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to <a href="https://go.dev" target="_blank" rel="noopener noreferrer">Golang<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. This major update brings enhanced performance, reliability, and cross-platform support with binary builds available for Windows, macOS, Linux, and FreeBSD. The source code is available at <a href="https://github.com/xrdebug/xrdebug" target="_blank" rel="noopener noreferrer">xrdebug/xrdebug<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> on GitHub.</p> <p>In this post, I want to share the challenges faced with the PHP version, the transition process, and the significant improvements achieved with this new release.</p> <h2 id="based-php-xrdebug"><a href="#based-php-xrdebug" class="header-anchor">#</a> Based, PHP xrDebug</h2> <p><a href="/_posts/2022/2022-01-06-hello-xr.html">Initially</a>, xrDebug was developed as an all-in-one PHP client-server system. I chose PHP because of its flexibility and simplicity, given my long experience with the language. PHP has always been a go-to for web-related tasks, and it felt natural to build xrDebug with it.</p> <p>The PHP ecosystem is diverse, and it wasn’t a challenge to build a debug server based on <a href="https://en.wikipedia.org/wiki/Server-sent_events" target="_blank" rel="noopener noreferrer">SSE<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, distributed in binary form, thanks to existing libraries for it. However, binary distribution was limited to macOS and Linux. While <a href="https://myray.app" target="_blank" rel="noopener noreferrer">Ray<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> offered a Windows installer, this created a disadvantage for xrDebug, which required users to run WSL as a workaround. This was a significant drawback, limiting access to the software for a large portion of the potential user base.</p> <p>I focused on the project distribution goals, and though PHP is a powerful and versatile language, I ultimately determined that creating reliable, cross-platform distributable desktop software was better suited to a different technology stack.</p> <h2 id="golang-xrdebug"><a href="#golang-xrdebug" class="header-anchor">#</a> Golang xrDebug</h2> <p>I chose Golang for its cross-compilation capabilities and robust standard library. During the rebuilding process, I aimed to minimize the use of third-party libraries, relying instead on the language itself as part of my learning journey. Keeping the project simple was a priority, and Golang was the perfect fit.</p> <p>The ability to cross-compile Go code for multiple platforms was a game changer. With just a few commands, I could generate binary builds for each platform, ensuring broad compatibility and accessibility for users. Integrating cross-compilation into GitHub Actions was straightforward, allowing the CI/CD pipeline to be set up quickly and efficiently.</p> <p>Golang’s comprehensive standard library, which includes support for HTTP, testing, benchmarking, linting, and a language server, provided a robust foundation for development. It felt great to have everything I needed right out of the box, without relying on external dependencies or complex IDE configurations. I’m used to having my own tooling and custom setup, but with Golang, none of these were necessary, making it a refreshing experience.</p> <h2 id="improvements-new-features"><a href="#improvements-new-features" class="header-anchor">#</a> Improvements &amp; new features</h2> <p>The transition to Golang brought several key improvements xrDebug. Here are some of the highlights:</p> <h3 id="cross-platform-support"><a href="#cross-platform-support" class="header-anchor">#</a> Cross-platform support</h3> <p>The transition to Golang has enabled cross-platform compatibility. Users can now download and run xrDebug on their preferred operating system without any additional setup or dependencies, making it accessible to a wider range of developers and users.</p> <h3 id="building-improvements"><a href="#building-improvements" class="header-anchor">#</a> Building improvements</h3> <p>Release times for both versions are similar, around one and a half minutes. However, Golang produces 8 binary artifacts, twice as many as the PHP version, in the same time. The key advantage is that the build process with Golang is simpler.</p> <p>Here’s the <a href="https://github.com/xrdebug/xrdebug/blob/3.0/.github/workflows/release.yml" target="_blank" rel="noopener noreferrer">Golang workflow<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and the <a href="https://github.com/xrdebug/xrdebug-php/blob/2.0/.github/workflows/release.yml" target="_blank" rel="noopener noreferrer">PHP version<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Notice that the PHP version requires more setup, making the project more complex and harder to maintain.</p> <p>The compiled binaries are significantly smaller in size: previously around 30 MB, now just 10 MB. The Docker image size has also reduced from 148 MB to 10 MB. The package size (tar.gz) is now about 4 MB.</p> <p>These improvements in distribution and resource consumption make xrDebug more lightweight and efficient. The reduced binary and Docker image sizes enhance portability, allowing developers to integrate xrDebug into their workflows without excessive resource usage. This portability is crucial for developers who need to run debugging tools in various environments, from local machines to cloud-based systems, ensuring a seamless and efficient debugging experience.</p> <h3 id="dependencies-improvements"><a href="#dependencies-improvements" class="header-anchor">#</a> Dependencies improvements</h3> <p>The PHP-based version of xrDebug relied on several <a href="https://github.com/xrdebug/xrdebug-php/blob/2.0/composer.json" target="_blank" rel="noopener noreferrer">external dependencies<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to achieve its functionality. While the PHP ecosystem provides a rich set of tools and libraries, managing multiple dependencies can increase maintenance overhead and complexity. As the saying goes, &quot;a dependency is a liability.&quot;</p> <p>In contrast, the new Golang-based version significantly reduces dependencies, relying on just one major external library: the <a href="https://github.com/patrickmn/go-cache" target="_blank" rel="noopener noreferrer">go-cache<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> library, used for the pause lock system.</p> <p>Golang’s robust standard library and built-in features allowed me to minimize external dependencies, simplifying the project and making it easier to maintain, build, and distribute efficiently. I didn’t miss any of the dependencies I had on PHP, as Golang provided everything I needed out of the box except for the TTL cache system.</p> <h3 id="performance-improvements"><a href="#performance-improvements" class="header-anchor">#</a> Performance improvements</h3> <p>A significant side effect of transitioning to Golang was a performance boost. The new version is faster, more responsive, and more efficient than its PHP-based predecessor. The optimized concurrency model, efficient resource management, and architecture contribute to the improved performance.</p> <p>To illustrate the performance improvements, I conducted a load test using <a href="https://github.com/wg/wrk" target="_blank" rel="noopener noreferrer">wrk<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> by sending 100 concurrent POST requests for 30 seconds to the <code>/messages</code> endpoint with a dump payload. Tests were conducted on the same machine with the same configuration.</p> <p>Results for xrdebug-php:</p> <div class="language-plain extra-class"><pre class="language-plain"><code>wrk -t4 -c100 -d30s -s test.lua http://127.0.0.1:27420/messages
Running 30s test @ http://127.0.0.1:27420/messages
  4 threads and 100 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    17.45ms   10.61ms 330.84ms   94.49%
    Req/Sec     1.49k   232.96     1.99k    75.75%
  178678 requests in 30.04s, 18.57MB read
Requests/sec:   5948.48
Transfer/sec:    633.19KB
</code></pre></div><p>Results for xrdebug (Golang):</p> <div class="language-plain extra-class"><pre class="language-plain"><code>❯ wrk -t4 -c100 -d30s -s test.lua http://127.0.0.1:27420/messages
Running 30s test @ http://127.0.0.1:27420/messages
  4 threads and 100 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     2.69ms    5.04ms  85.05ms   91.18%
    Req/Sec    20.89k     3.44k   28.51k    69.00%
  2496773 requests in 30.04s, 428.60MB read
Requests/sec:  83104.24
Transfer/sec:     14.27MB
</code></pre></div><p>Summary of results:</p> <ul><li>Go handles approximately 14x more requests per second than PHP.</li> <li>Go exhibits significantly lower latency (about 6.5x less) compared to PHP.</li> <li>Go achieves a much higher transfer rate, about 22x greater than PHP.</li> <li>Go processed significantly more requests and data during the same time frame.</li></ul> <p>These performance improvements were a natural outcome of transitioning to Golang, with no manual optimizations required. The results were well received, as I anticipated better performance but not with such minimal effort. While the PHP version handled around 6,000 requests per second, which is impressive for a PHP application, the Golang version’s performance was on a different level.</p> <h3 id="new-features-and-changes"><a href="#new-features-and-changes" class="header-anchor">#</a> New features and changes</h3> <p>In addition to the transition to a new programming language, xrDebug 3 introduces several key updates, improvements, and features:</p> <ul><li><strong>Updated signature algorithm:</strong> The previous algorithm (based on PHP serialize) has been replaced with a more universal approach, making the sign process available for more languages by simply concatenating keys and values.</li> <li><strong>Updated keys file handling:</strong> The new version reads keys from files, not inline.</li> <li><strong>Enhanced logging system:</strong> The logging mechanism has been refined, offering more detailed insights and improved error handling.</li> <li><strong>Removed custom working directory:</strong> Support for custom working directories has been dropped.</li> <li><strong>Removed CLI color support:</strong> Color support has been removed, as it was deemed unnecessary for the current version. The user interface is the SPA, not the terminal.</li> <li><strong>Removed open browser function:</strong> The function to automatically open a browser window has been removed.</li></ul> <h2 id="development-journey"><a href="#development-journey" class="header-anchor">#</a> Development journey</h2> <p>Learning Golang was an exciting and rewarding challenge, and I want to share some resources that truly helped me during the 15-day journey from zero to a working xrDebug 3.0:</p> <p>I began with the <a href="https://go.dev/doc/tutorial/getting-started" target="_blank" rel="noopener noreferrer">Getting Started guide<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, which provided a solid introduction to the language. However, what really accelerated my progress was this <a href="https://www.youtube.com/watch?v=8uiZC0l4Ajw" target="_blank" rel="noopener noreferrer">video by Alex Mux<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. In just about forty minutes, it covered the essentials of Golang, giving me the confidence to dive deeper into the language.</p> <p>Coming from a PHP background, I found <a href="https://www.dantleech.com/blog/2022/09/19/encountering-go-as-a-php-developer/" target="_blank" rel="noopener noreferrer">“Encountering Go as a PHP Developer”<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> by Daniel Leech particularly helpful. It bridged the gap between familiar PHP concepts and Go’s unique features, saving me a lot of time and frustration. I’m truly grateful to Daniel for sharing his insights, which made the transition smoother.</p> <p>Setting up <a href="https://code.visualstudio.com/docs/languages/go" target="_blank" rel="noopener noreferrer">Golang with Visual Studio Code<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> was straightforward, and the language support is fantastic. The official extension installs additional tools automatically, making the development environment nearly effortless.</p> <h2 id="closing-thoughts"><a href="#closing-thoughts" class="header-anchor">#</a> Closing thoughts</h2> <p>Rebuilding a working system is always a last resort, and that was the case for xrDebug. The transition from PHP to Golang was a significant undertaking, but the benefits far outweigh the challenges. The new version is faster, more reliable and easier to distribute.</p> <p>Taking the time to learn a new language and apply it to a real-world project has been incredibly rewarding. While rebuilding wasn’t strictly necessary, the journey was worth every moment. It has not only improved xrDebug but also expanded my skills and knowledge.</p> <p>I’m excited to see how the community receives this new release and look forward to your feedback. Your support and insights will be invaluable as we continue to evolve and improve xrDebug.</p></div></div></div></article> <div class="row justify-content-center"><div class="col-md-9"><!----> <!----></div></div> <div class="row justify-content-center mt-40"><div class="col-md-8"><div class="post-meta"><!----> <!----> <div itemprop="keywords" class="post-meta-tags"><a href="/tag/show" class="blog-tag" data-v-4217f36d> show </a><a href="/tag/dev" class="blog-tag" data-v-4217f36d> dev </a><a href="/tag/golang" class="blog-tag" data-v-4217f36d> golang </a></div></div></div></div> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#based-php-xrdebug" title="Based, PHP xrDebug">Based, PHP xrDebug</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#golang-xrdebug" title="Golang xrDebug">Golang xrDebug</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#improvements-new-features" title="Improvements &amp; new features">Improvements &amp; new features</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#cross-platform-support" title="Cross-platform support">Cross-platform support</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#building-improvements" title="Building improvements">Building improvements</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#dependencies-improvements" title="Dependencies improvements">Dependencies improvements</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#performance-improvements" title="Performance improvements">Performance improvements</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#new-features-and-changes" title="New features and changes">New features and changes</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#development-journey" title="Development journey">Development journey</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#closing-thoughts" title="Closing thoughts">Closing thoughts</a></div></div></div></div> <footer class="themefooter"><div class="container"><div class="row justify-content-between"><div class="col"><span>Rodolfo blogging since 2012.</span></div> <div class="col text-right"><ul class="list-unstyled"><li class="contact-item"><a href="https://github.com/rodber" target="_blank" rel="noopener noreferrer" class="external"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>
              
            </a></li><li class="contact-item"><a href="https://www.linkedin.com/in/rodber/" target="_blank" rel="noopener noreferrer" class="external"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-linkedin"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg>
              
            </a></li><li class="contact-item"><a href="https://twitter.com/godlike" target="_blank" rel="noopener noreferrer" class="external"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg>
              
            </a></li><li class="contact-item"><a href="mailto:inbox@rodolfoberrios.com" class="external"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-mail"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
              
            </a></li><li class="contact-item"><a href="https://rodolfoberrios.com" target="_blank" rel="noopener noreferrer" class="external"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-globe"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg>
              
            </a></li></ul> <ul class="list-unstyled"></ul></div></div></div></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.29ff170a.js" defer></script><script src="/assets/js/6.2d350c7c.js" defer></script><script src="/assets/js/3.042bda6b.js" defer></script><script src="/assets/js/66.3c384577.js" defer></script>
  </body>
</html>
